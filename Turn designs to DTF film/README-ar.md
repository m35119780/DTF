# DTF Film Smart Packer (نسخة JavaScript)

أداة ذكية لترتيب صور DTF الخاصة بك بشكل مثالي لتوفير المواد.

## نظرة عامة

هذا المشروع هو نسخة مطورة بـ JavaScript من أداة DTF Film Smart Packer التي كانت مبنية بـ Flask/Python. يقوم بترتيب العديد من صور التصميم على لوحة واحدة بطريقة ذكية لتحسين استخدام المساحة وتقليل هدر المواد عند طباعة DTF (Direct-to-Film).

## المميزات

- **ترتيب تلقائي**: ترتيب الصور بشكل ذكي لأفضل استخدام للمساحة
- **دعم التدوير**: يدعم تدوير الصور بزاوية 90 درجة لتحسين الترتيب
- **استخراج الأبعاد**: يقرأ أبعاد الطباعة مباشرة من أسماء الملفات
- **معالجة متوازية**: يستخدم معالجة متعددة النوى للحصابات المعقدة
- **واجهة مستخدم عربية**: واجهة مستخدم كاملة باللغة العربية
- **تنسيقات متعددة للإخراج**: يولد ملفات PDF وصور PNG وتقارير نصية

## متطلبات النظام

- Node.js v16 أو أحدث
- خادم Redis (للجلسات ومعالجة المهام)

## التثبيت

1. استنساخ المستودع:

```bash
git clone https://github.com/yourusername/dtf-smart-packer-js.git
cd dtf-smart-packer-js
```

2. تثبيت التبعيات:

```bash
npm install
```

3. إنشاء ملف `.env` (أو تعديل الملف الموجود):

```
NODE_ENV=development
PORT=3000
SESSION_SECRET=replace_with_strong_secure_secret_key
REDIS_URL=redis://localhost:6379
UPLOAD_DIR=./uploads
OUTPUT_DIR=./outputs
MAX_FILE_SIZE=50MB
CANVAS_WIDTH_CM=60
SPACING_MM=3
PDF_MARGIN_CM=0.5
PNG_OUTPUT_DPI=150
PLACEMENT_STEP_MM=5
ALLOW_ROTATION=true
SESSION_TIMEOUT=3600000
SESSION_CLEANUP_INTERVAL=21600000
```

4. إنشاء المجلدات الضرورية:

```bash
mkdir -p uploads outputs logs
```

## تشغيل التطبيق

1. تشغيل خادم Redis:

```bash
redis-server
```

2. تشغيل خادم التطبيق:

```bash
npm start
```

أو في وضع التطوير:

```bash
npm run dev
```

3. الوصول للتطبيق على العنوان: [http://localhost:3000](http://localhost:3000)

## كيفية الاستخدام

1. **تحميل الصور**:
   - تأكد من تضمين الأبعاد في أسماء الملفات، مثال: `design_9cm_x_5cm.png`
   - يمكنك استخدام السحب والإفلات أو نافذة اختيار الملفات

2. **مراجعة الأبعاد**:
   - تحقق من أن الأبعاد تم استخراجها بشكل صحيح
   - قم بتعديل الأبعاد إذا لزم الأمر

3. **ضبط خيارات التعبئة**:
   - حدد عرض اللوحة
   - حدد المسافة بين التصاميم
   - حدد ما إذا كان مسموحًا بتدوير الصور

4. **معالجة الصور**:
   - انتظر انتهاء المعالجة

5. **تحميل النتائج**:
   - قم بتحميل ملف PDF وصورة PNG
   - راجع قائمة الصور التي لم يتم وضعها إن وجدت

## المكونات الرئيسية

- **واجهة المستخدم**: مبنية باستخدام HTML/CSS/JavaScript وتستخدم EJS كمحرك قوالب
- **خلفية السيرفر**: Node.js مع Express
- **معالجة الصور**: استخدام مكتبات Sharp وCanvas
- **معالجة المهام الخلفية**: Bull مع Redis
- **إدارة الجلسات**: إدارة جلسات متكاملة مع Redis

## المساهمة في التطوير

نرحب بمساهماتك! يرجى اتباع الخطوات التالية:

1. قم بعمل Fork للمشروع
2. قم بإنشاء فرع للميزة الخاصة بك: `git checkout -b feature/amazing-feature`
3. قم بتنفيذ التغييرات: `git commit -m 'Add some amazing feature'`
4. قم برفع التغييرات: `git push origin feature/amazing-feature`
5. قم بإرسال طلب دمج التغييرات (Pull Request)

## الترخيص

هذا المشروع مرخص تحت رخصة MIT - انظر ملف [LICENSE](LICENSE) للحصول على التفاصيل.

## الشكر والتقدير

- شكر خاص للمشروع الأصلي DTF Film Smart Packer المبني بـ Flask/Python
- شكر لجميع مطوري المكتبات المفتوحة المصدر المستخدمة في هذا المشروع 